/*!
 * page v1.0.1
 * lucasmazza/page.js
 * 
 * Licensed MIT Â© Lucas Mazza <lucastmazza@gmail.com>
 */
!function e(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("page",[],n):"object"==typeof exports?exports.page=n():t.page=n()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var r=n(1),a=i(r);e.exports=a.default},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();Object.defineProperty(t,"__esModule",{value:!0});var r=t.Page=function(){function e(){n(this,e),this.initializers={":before":[],":after":[]},this.doc=window&&window.document}return i(e,null,[{key:"variantsDelimiter",value:function e(){return"+"}}]),i(e,[{key:"at",value:function e(t,n){var i=void 0,r=void 0,a=void 0;i=t.split(" ");for(var o=0,u=i.length;u>o;o++)r=this._buildScope(i[o]),a={variants:r.variants,fn:n},this.initializers[r.name]=this.initializers[r.name]||[],this.initializers[r.name].push(a)}},{key:"dispatch",value:function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=this.recognize();if(!n)throw new Error("<body> does not have a [data-page] attribute");var i=this._buildScope(n),r=this._buildChain(i);this._executeChain(r,i,t)}},{key:"recognize",value:function e(){var t=this.doc.getElementsByTagName("body")[0];return t&&t.getAttribute("data-page")}},{key:"_buildScope",value:function t(n){var i={},r=n.split(e.variantsDelimiter());return i.name=r.shift(),i.variants=r.sort(),i}},{key:"_buildChain",value:function e(t){var n=this.initializers[":before"],i=this.initializers[t.name]||[],r=this.initializers[":after"];return n.concat(i).concat(r)}},{key:"_executeChain",value:function e(t,n,i){for(var r=void 0,a=void 0,o=void 0,u=0,s=t.length;s>u;u++)if(a=t[u],(!(a.variants.length>0)||this._arrayMatches(n.variants,a.variants))&&(o={scope:n.name,variants:n.variants,data:i},r=a.fn(o),r===!1))return}},{key:"_arrayMatches",value:function e(t,n){if(t.length!==n.length)return!1;for(var i=0;i<t.length;++i)if(t[i]!==n[i])return!1;return!0}}]),e}();t.default=new r}])});